---
layout: post

title: super
tip-number: 31
tip-username: richzw
tip-username-profile: https://github.com/richzw
tip-tldr: super in python

categories:
    - en
---

```python
class Shape:
    def __init__(self, shapename, **kwds):
        self.shapename = shapename
        super().__init__(**kwds)        

class ColoredShape(Shape):
    def __init__(self, color, **kwds):
        self.color = color
        super().__init__(**kwds)

cs = ColoredShape(color='red', shapename='circle')
```

`Root.draw` can also employ **defensive programming** using an assertion to ensure it isn’t masking some other `draw()` method later in
the chain. This could happen if a subclass erroneously incorporates a class that has a `draw()` method but doesn’t inherit from Root

```python
class Root:
    def draw(self):
        # the delegation chain stops here
        assert not hasattr(super(), 'draw')

class Shape(Root):
    def __init__(self, shapename, **kwds):
        self.shapename = shapename
        super().__init__(**kwds)
    def draw(self):
        print('Drawing.  Setting shape to:', self.shapename)
        super().draw()

class ColoredShape(Shape):
    def __init__(self, color, **kwds):
        self.color = color
        super().__init__(**kwds)
    def draw(self):
        print('Drawing.  Setting color to:', self.color)
        super().draw()

cs = ColoredShape(color='blue', shapename='square')
cs.draw()
```

For example, the following Moveable class does not make `super()` calls, and it has an `__init__()` signature that is incompatible with 
`object.__init__`, and it does not inherit from `Root`:

```python
class Moveable:
    def __init__(self, x, y):
        self.x = x
        self.y = y
    def draw(self):
        print('Drawing at position:', self.x, self.y)
```

If we want to use this class with our cooperatively designed `ColoredShape` hierarchy, we need to make an adapter with the requisite 
`super()` calls:

```python
class MoveableAdapter(Root):
    def __init__(self, x, y, **kwds):
        self.movable = Moveable(x, y)
        super().__init__(**kwds)
    def draw(self):
        self.movable.draw()
        super().draw()

class MovableColoredShape(ColoredShape, MoveableAdapter):
    pass

MovableColoredShape(color='red', shapename='triangle',
                    x=10, y=20).draw()
```                    
